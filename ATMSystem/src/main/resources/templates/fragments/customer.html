<div th:fragment="customerTable" class="container-fluid">

    <!-- Page Heading -->
    <h1 class="h3 mb-2 text-gray-800">Kh√°ch h√†ng</h1>


    <!-- DataTales Example -->
    <div class="card shadow mb-4">
        <div class="card-header py-3">
            <h6 class="m-0 font-weight-bold text-primary">Danh s√°ch kh√°ch h√†ng</h6>
        </div>
        <div class="card-body">
            <div class="table-responsive">
                <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
                    <thead>

                    <tr>
                        <th>ID</th>
                        <th>H·ªç t√™n</th>
                        <th>SƒêT</th>
                        <th>Email</th>
                        <th>Thao t√°c</th>
                    </tr>
                    </thead>
                    <tfoot>
                    <tr>
                        <th>ID</th>
                        <th>Name</th>
                        <th>Phone</th>
                        <th>Email</th>
                        <th>Thao t√°c</th>
                    </tr>
                    </tfoot>
                    <tbody>

                    <tr th:each="customer : ${customers}">
                        <td th:text="${customer.userId}">1</td>
                        <td th:text="${customer.name}"></td>
                        <td th:text="${customer.phone}"></td>
                        <td th:text="${customer.email}"></td>
                        <td>
                            <button class="btn btn-info" th:attr="onclick='viewTransactionHistory(' + ${customer.userId} + ')'" >
                                üïê L·ªãch s·ª≠ GD
                            </button>

                            <button class="btn btn-success" th:attr="onclick='viewAddMoney(' + ${customer.userId} + ')'" >
                                üí≥ N·∫°p ti·ªÅn
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

</div>

<div class="modal fade" id="transactionHistoryModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">L·ªãch s·ª≠ giao d·ªãch</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <ul id="transactionList"></ul>
            </div>
        </div>
    </div>
</div>

<script>
    function viewTransactionHistory(customerId) {
        // fetch('/api/transactions/history/' + customerId)
        //     .then(response => response.json())
        //     .then(data => {
        //         let list = document.getElementById("transactionList");
        //         list.innerHTML = "";
        //         data.forEach(tx => {
        //             let li = document.createElement("li");
        //             li.textContent = tx.date + ": " + tx.amount + " VND (" + tx.type + ")";
        //             list.appendChild(li);
        //         });
        //         new bootstrap.Modal(document.getElementById("transactionHistoryModal")).show();
        //     });

        alert("Show Transaction modal")
    }

    function viewAddMoney(customerId) {

        alert("Show Add money modal")
    }
</script>